{"version":3,"file":"11.test.js","sourceRoot":"","sources":["../../../spec/issues/11.test.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iBA2BG;;AA3BH,2BAAuB;AACvB,yCAAkD;AAOlD;IAAA;IAIA,CAAC;IAHG,4BAAG,GAAH,UAAI,OAAgB;QAChB,OAAO,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;IACrC,CAAC;IACL,qBAAC;AAAD,CAAC,AAJD,IAIC;AAED,aAAI,CAAC,sCAAsC,EAAE,UAAM,CAAC;;;QAC5C,gBAAgB,GAAG,kBAAU,CAAC,GAAG,EAAkB,CAAC;QACxD,gBAAgB,CAAC,GAAG,CAAC,WAAG,CAAC,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAEvC,KAAK,GAAG,CAAC,CAAC;QACd,gBAAgB,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAEzC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,WAAG,CAAC,EAAE,CAAC,UAAA,CAAC;YACrC,KAAK,EAAE,CAAC;YACR,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC;QAEJ,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;;;KAClB,CAAC,CAAC","sourcesContent":["import test from 'ava';\r\nimport { Substitute, Arg } from '../../src/index';\r\n\r\ntype Addands = {\r\n    op1: number;\r\n    op2: number;\r\n}\r\n\r\nclass RealCalculator {\r\n    add(addands: Addands): number {\r\n        return addands.op1 + addands.op2;\r\n    }\r\n}\r\n\r\ntest('issue 11: arg.is is only called once', async t => {\r\n    let mockedCalculator = Substitute.for<RealCalculator>();\r\n    mockedCalculator.add(Arg.any()).returns(4);\r\n\r\n    let count = 0;\r\n    mockedCalculator.add({ op1: 1, op2: 2 });\r\n\r\n    mockedCalculator.received(1).add(Arg.is(a => {\r\n        count++;\r\n        return a.op1 === 1 && a.op2 === 2;\r\n    }));\r\n\r\n    t.is(count, 1);\r\n});"]}